<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– Agent Local - Interface de ContrÃ´le</title>
    <link rel="stylesheet" href="/ui/style.css">
</head>

<body>

<!-- HEADER -->
<header>
    <h1>ğŸ¤– Agent Local</h1>
    <p class="subtitle">Interface de contrÃ´le et conversation</p>
    <div class="session-info">
        <small>Session ID: <span id="session-id">Chargement...</span></small>
        <div id="status-bar" class="status-bar status-unknown">âšª Statut inconnu</div>
    </div>
</header>

<div class="container">
    <div class="main-layout">

        <!-- ========== SECTION CHAT ========== -->
        <section class="chat-section">
            <h2>ğŸ’¬ Conversation</h2>
            
            <div id="chat-window" class="chat-history"></div>
            
            <div class="chat-input-container">
                <input
                    id="user-message"
                    type="text"
                    placeholder="Tapez votre message ici..."
                    autocomplete="off"
                />
                <button class="btn-primary" onclick="sendMessage()">Envoyer</button>
            </div>

            <div class="chat-controls">
                <button class="btn-small" onclick="testHealth()">ğŸ¥ Test SantÃ©</button>
                <button class="btn-small" onclick="showMemory()">ğŸ’¾ Voir MÃ©moire</button>
                <button class="btn-small" onclick="clearChat()">ğŸ—‘ï¸ Effacer Chat</button>
                <button class="btn-small" onclick="openRAG()">ğŸ“š Ouvrir RAG</button>
            </div>
        </section>

        <!-- ========== SECTION RAG ========== -->
        <section class="rag-section">
            <h2>ğŸ“š RAG (Retrieval-Augmented Generation)</h2>
            
            <div class="form-group">
                <label for="dataset">Nom du dataset</label>
                <input 
                    id="dataset" 
                    class="input-field" 
                    type="text" 
                    placeholder="ex: documentation, notes, projets..."
                />
            </div>

            <div class="divider"></div>

            <div class="form-group">
                <label for="rag-text">Ajouter du contenu au dataset</label>
                <textarea 
                    id="rag-text" 
                    class="textarea-field" 
                    rows="4" 
                    placeholder="Collez ou tapez le contenu Ã  indexer..."
                ></textarea>
                <button class="btn-secondary" onclick="addToRAG()">â• Ajouter au RAG</button>
            </div>

            <div class="divider"></div>

            <div class="form-group">
                <label for="rag-question">Interroger le dataset</label>
                <input 
                    id="rag-question" 
                    class="input-field" 
                    type="text" 
                    placeholder="Posez une question sur le dataset..."
                />
                <button class="btn-secondary" onclick="askRAG()">ğŸ” Interroger</button>
            </div>

            <div class="form-group">
                <label>RÃ©ponse du RAG</label>
                <pre id="rag-answer" class="rag-answer"></pre>
            </div>
        </section>

        <!-- ========== SECTION LOGS ========== -->
        <section class="logs-section">
            <h2>ğŸ“„ Logs systÃ¨me</h2>
            
            <div class="logs-controls">
                <button class="btn-small" onclick="clearLogs()">ğŸ—‘ï¸ Effacer</button>
                <button class="btn-small" onclick="toggleAutoScroll()">
                    ğŸ“œ Auto-scroll: <span id="autoscroll-status">ON</span>
                </button>
            </div>

            <div id="logs-window" class="logs-window"></div>
        </section>

    </div>
</div>

<!-- SCRIPT -->
<script src="/ui/app.js"></script>

</body>
</html>
